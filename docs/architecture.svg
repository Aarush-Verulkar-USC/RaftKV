<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 880 620" font-family="'SF Mono','Fira Code','Cascadia Code',monospace">
  <defs>
    <linearGradient id="bgGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#0f1117"/>
      <stop offset="100%" stop-color="#0a0b10"/>
    </linearGradient>
    <linearGradient id="leaderGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#34d399" stop-opacity="0.15"/>
      <stop offset="100%" stop-color="#34d399" stop-opacity="0.05"/>
    </linearGradient>
    <linearGradient id="followerGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#60a5fa" stop-opacity="0.12"/>
      <stop offset="100%" stop-color="#60a5fa" stop-opacity="0.04"/>
    </linearGradient>
    <linearGradient id="clientGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#a78bfa" stop-opacity="0.15"/>
      <stop offset="100%" stop-color="#a78bfa" stop-opacity="0.05"/>
    </linearGradient>
    <linearGradient id="kvGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#22d3ee" stop-opacity="0.12"/>
      <stop offset="100%" stop-color="#22d3ee" stop-opacity="0.04"/>
    </linearGradient>
    <linearGradient id="raftGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#fbbf24" stop-opacity="0.12"/>
      <stop offset="100%" stop-color="#fbbf24" stop-opacity="0.04"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <marker id="arrowGreen" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#34d399" stroke-width="1.5"/>
    </marker>
    <marker id="arrowBlue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#60a5fa" stroke-width="1.5"/>
    </marker>
    <marker id="arrowCyan" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#22d3ee" stroke-width="1.5"/>
    </marker>
    <marker id="arrowPurple" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#a78bfa" stroke-width="1.5"/>
    </marker>
    <marker id="arrowOrange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#fbbf24" stroke-width="1.5"/>
    </marker>
    <marker id="arrowDim" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="none" stroke="#4a4d5a" stroke-width="1.5"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="880" height="620" rx="12" fill="url(#bgGrad)"/>
  <rect width="880" height="620" rx="12" fill="none" stroke="#1e1e24" stroke-width="1"/>

  <!-- Title -->
  <text x="440" y="38" text-anchor="middle" fill="#e1e4ed" font-size="15" font-weight="600" letter-spacing="0.5">
    <tspan fill="#34d399">raft</tspan><tspan fill="#e1e4ed">-kv</tspan>
    <tspan fill="#4a4d5a" font-weight="400" font-size="12">  system architecture</tspan>
  </text>

  <!-- ════════ CLIENT ════════ -->
  <rect x="320" y="60" width="240" height="58" rx="10" fill="url(#clientGrad)" stroke="#a78bfa" stroke-width="1.2" stroke-opacity="0.5"/>
  <text x="440" y="84" text-anchor="middle" fill="#a78bfa" font-size="13" font-weight="600">Client CLI</text>
  <text x="440" y="104" text-anchor="middle" fill="#6b6e82" font-size="10">./bin/client put | get | delete</text>

  <!-- Arrow: Client -> KV Server -->
  <line x1="440" y1="118" x2="440" y2="155" stroke="#a78bfa" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowPurple)"/>
  <rect x="370" y="128" width="140" height="18" rx="4" fill="#0f1117"/>
  <text x="440" y="141" text-anchor="middle" fill="#a78bfa" font-size="9" opacity="0.8">gRPC  Put / Get / Delete</text>

  <!-- ════════ KV SERVER LAYER ════════ -->
  <rect x="200" y="160" width="480" height="68" rx="10" fill="url(#kvGrad)" stroke="#22d3ee" stroke-width="1.2" stroke-opacity="0.4"/>
  <text x="440" y="186" text-anchor="middle" fill="#22d3ee" font-size="13" font-weight="600">KV Server Layer</text>
  <text x="440" y="206" text-anchor="middle" fill="#6b6e82" font-size="10">Accepts requests  |  Redirects non-leaders  |  Waits for commit</text>
  <!-- file ref -->
  <text x="650" y="220" text-anchor="end" fill="#3a3d4a" font-size="8">pkg/kv/server.go</text>

  <!-- Arrow: KV -> Raft -->
  <line x1="440" y1="228" x2="440" y2="270" stroke="#22d3ee" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowCyan)"/>
  <rect x="380" y="240" width="120" height="18" rx="4" fill="#0f1117"/>
  <text x="440" y="253" text-anchor="middle" fill="#22d3ee" font-size="9" opacity="0.8">Submit(command)</text>

  <!-- ════════ RAFT LAYER ════════ -->
  <rect x="140" y="275" width="600" height="78" rx="10" fill="url(#raftGrad)" stroke="#fbbf24" stroke-width="1.2" stroke-opacity="0.4"/>
  <text x="440" y="302" text-anchor="middle" fill="#fbbf24" font-size="13" font-weight="600">Raft Consensus Layer</text>
  <text x="440" y="322" text-anchor="middle" fill="#6b6e82" font-size="10">Leader Election  |  Log Replication  |  Commit Tracking  |  Safety</text>
  <text x="440" y="340" text-anchor="middle" fill="#3a3d4a" font-size="9">AppendEntries RPC  |  RequestVote RPC  |  InstallSnapshot RPC</text>
  <text x="710" y="345" text-anchor="end" fill="#3a3d4a" font-size="8">pkg/raft/raft.go</text>

  <!-- ════════ NODES ════════ -->
  <!-- Arrows from Raft layer to nodes -->
  <line x1="260" y1="353" x2="200" y2="398" stroke="#4a4d5a" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowDim)"/>
  <line x1="440" y1="353" x2="440" y2="398" stroke="#4a4d5a" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowDim)"/>
  <line x1="620" y1="353" x2="680" y2="398" stroke="#4a4d5a" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowDim)"/>

  <!-- Node 1 (Leader) -->
  <rect x="108" y="403" width="184" height="90" rx="10" fill="url(#leaderGrad)" stroke="#34d399" stroke-width="1.5" stroke-opacity="0.6"/>
  <!-- Crown -->
  <polyline points="185,400 190,392 200,397 210,392 215,400" fill="none" stroke="#34d399" stroke-width="1.8" filter="url(#glow)"/>
  <circle cx="200" cy="430" r="14" fill="none" stroke="#34d399" stroke-width="1.5" filter="url(#glow)"/>
  <text x="200" y="434" text-anchor="middle" fill="#34d399" font-size="11" font-weight="600">N1</text>
  <text x="200" y="454" text-anchor="middle" fill="#34d399" font-size="10" font-weight="500">Leader</text>
  <text x="200" y="472" text-anchor="middle" fill="#4a4d5a" font-size="9">Raft + KV State</text>
  <text x="200" y="486" text-anchor="middle" fill="#3a3d4a" font-size="8">:9001 / :8001</text>

  <!-- Node 2 (Follower) -->
  <rect x="348" y="403" width="184" height="90" rx="10" fill="url(#followerGrad)" stroke="#60a5fa" stroke-width="1.2" stroke-opacity="0.4"/>
  <circle cx="440" cy="430" r="14" fill="none" stroke="#60a5fa" stroke-width="1.5"/>
  <text x="440" y="434" text-anchor="middle" fill="#60a5fa" font-size="11" font-weight="600">N2</text>
  <text x="440" y="454" text-anchor="middle" fill="#60a5fa" font-size="10" font-weight="500">Follower</text>
  <text x="440" y="472" text-anchor="middle" fill="#4a4d5a" font-size="9">Raft + KV State</text>
  <text x="440" y="486" text-anchor="middle" fill="#3a3d4a" font-size="8">:9002 / :8002</text>

  <!-- Node 3 (Follower) -->
  <rect x="588" y="403" width="184" height="90" rx="10" fill="url(#followerGrad)" stroke="#60a5fa" stroke-width="1.2" stroke-opacity="0.4"/>
  <circle cx="680" cy="430" r="14" fill="none" stroke="#60a5fa" stroke-width="1.5"/>
  <text x="680" y="434" text-anchor="middle" fill="#60a5fa" font-size="11" font-weight="600">N3</text>
  <text x="680" y="454" text-anchor="middle" fill="#60a5fa" font-size="10" font-weight="500">Follower</text>
  <text x="680" y="472" text-anchor="middle" fill="#4a4d5a" font-size="9">Raft + KV State</text>
  <text x="680" y="486" text-anchor="middle" fill="#3a3d4a" font-size="8">:9003 / :8003</text>

  <!-- Peer arrows between nodes -->
  <line x1="292" y1="440" x2="348" y2="440" stroke="#fbbf24" stroke-width="1" stroke-opacity="0.4" marker-end="url(#arrowOrange)"/>
  <line x1="348" y1="450" x2="292" y2="450" stroke="#fbbf24" stroke-width="1" stroke-opacity="0.4" marker-end="url(#arrowOrange)"/>
  <line x1="532" y1="440" x2="588" y2="440" stroke="#fbbf24" stroke-width="1" stroke-opacity="0.4" marker-end="url(#arrowOrange)"/>
  <line x1="588" y1="450" x2="532" y2="450" stroke="#fbbf24" stroke-width="1" stroke-opacity="0.4" marker-end="url(#arrowOrange)"/>

  <!-- Long peer arrow N1 <-> N3 (curved) -->
  <path d="M270,493 Q440,530 610,493" fill="none" stroke="#fbbf24" stroke-width="1" stroke-opacity="0.3" stroke-dasharray="3,3"/>

  <!-- ════════ STORAGE LAYER ════════ -->
  <!-- Arrows to storage -->
  <line x1="200" y1="493" x2="200" y2="535" stroke="#4a4d5a" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowDim)"/>
  <line x1="440" y1="493" x2="440" y2="535" stroke="#4a4d5a" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowDim)"/>
  <line x1="680" y1="493" x2="680" y2="535" stroke="#4a4d5a" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowDim)"/>

  <!-- BoltDB boxes -->
  <rect x="148" y="540" width="104" height="36" rx="6" fill="#12131a" stroke="#4a4d5a" stroke-width="0.8"/>
  <text x="200" y="562" text-anchor="middle" fill="#6b6e82" font-size="10" font-weight="500">BoltDB</text>

  <rect x="388" y="540" width="104" height="36" rx="6" fill="#12131a" stroke="#4a4d5a" stroke-width="0.8"/>
  <text x="440" y="562" text-anchor="middle" fill="#6b6e82" font-size="10" font-weight="500">BoltDB</text>

  <rect x="628" y="540" width="104" height="36" rx="6" fill="#12131a" stroke="#4a4d5a" stroke-width="0.8"/>
  <text x="680" y="562" text-anchor="middle" fill="#6b6e82" font-size="10" font-weight="500">BoltDB</text>

  <text x="440" y="596" text-anchor="middle" fill="#3a3d4a" font-size="9">Persistent state: term, votedFor, log entries</text>
  <text x="440" y="610" text-anchor="middle" fill="#2a2d3a" font-size="8">pkg/storage/storage.go</text>

  <!-- ════════ LEGEND ════════ -->
  <rect x="16" y="540" width="110" height="70" rx="6" fill="#0c0d12" stroke="#1e1e24" stroke-width="0.8"/>
  <text x="71" y="555" text-anchor="middle" fill="#4a4d5a" font-size="8" font-weight="600" letter-spacing="1">LEGEND</text>
  <circle cx="30" cy="570" r="4" fill="#34d399"/>
  <text x="42" y="573" fill="#6b6e82" font-size="9">Leader</text>
  <circle cx="30" cy="586" r="4" fill="#60a5fa"/>
  <text x="42" y="589" fill="#6b6e82" font-size="9">Follower</text>
  <circle cx="30" cy="602" r="4" fill="#fbbf24"/>
  <text x="42" y="605" fill="#6b6e82" font-size="9">Raft RPCs</text>
</svg>
